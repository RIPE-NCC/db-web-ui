<div>
    <h1>Multi update</h1>

    <alerts></alerts>

    <div class="form-group" ng-if="textMode">

        <form id="textMultiRpslForm">

            <label for="multiRpsl">RPSL for multiple objects</label>

                <textarea id="multiRpsl"
                          class="form-control"
                          rows="15"
                          cols="60"
                          placeholder="Paste your RPSL in here"
                          ng-model="objects.rpsl"
                          style="font-family:monospace;"></textarea>

            <button ng-click="setWebMode()" class="blue-button pull-right ga-multiobj-webmode">Preview</button>
            <p>
                You can optionally use <strong>password:</strong>-attribute to prevent an interactive password popup or to provide multiple passwords.
            </p>
        </form>

    </div>

    <div class="form-group" ng-if="!textMode">

        <button ng-click="setTextMode()" class="blue-button pull-right ga-multiobj-textmode">Fix mistakes</button>

        <form id="textTableRpslForm">
            <label for="multiObjectTable">Objects to update</label>
            <table id="multiObjectTable" class="table">
                <thead>
                <tr>
                    <th></th>
                    <th>Action</th>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Status</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat-start="object in objects.objects">
                    <td>
                        <button ng-if="object.expanded" ng-click="object.expanded = false">-</button>
                        <button ng-if="!object.expanded" ng-click="object.expanded = true">+</button>
                    </td>
                    <td>{{object.action}}</td>
                    <td>{{object.type}}</td>
                    <td>
                        <a ng-if="object.displayUrl" ng-href="{{object.displayUrl}}" target="_blank">{{object.name}}</a>
                        <apan ng-if="!object.displayUrl">{{object.name}}</apan>

                    </td>

                    <td ng-style="object.statusStyle">{{object.status}}</td>
                </tr>
                <tr ng-if="object.expanded && object.errors.length>0">
                    <td></td>
                    <td>errors</td>
                    <td colspan="4">
                        <ul>
                            <li ng-repeat="error in object.errors">{{error.plainText}}</li>
                        </ul>
                    </td>
                </tr>
                <tr ng-if="object.expanded && object.warnings.length>0">
                    <td></td>
                    <td>warnings</td>
                    <td colspan="4">
                        <ul>
                            <li ng-repeat="warning in object.warnings">{{warning.plainText}}</li>
                        </ul>
                    </td>
                </tr>
                <tr ng-if="object.expanded && object.infos.length>0">
                    <td></td>
                    <td>infos</td>
                    <td colspan="4">
                        <ul>
                            <li ng-repeat="info in object.infos">{{info.plainText}}</li>
                        </ul>
                    </td>
                </tr>
                <tr ng-if="object.expanded" ng-repeat-end>
                    <td></td>
                    <td colspan="5">
                        <pre style="font-family:monospace;">{{object.rpsl}}</pre></td>

                    <td ng-if="object.textupdatesUrl"><a ng-href="{{object.textupdatesUrl}}" target="_blank">{{object.action}}
                        single object</a>
                    </td>
                </tr>
                </tbody>
            </table>

            <input type="submit" ng-disabled="! didAllActionsComplete()" ng-click="submit()"
                   class="blue-button pull-right ga-multiobj-updateall" value="Update all"/>

        </form>

    </div>


</div>
