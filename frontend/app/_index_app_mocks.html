<script type="text/javascript">
    var mockGet = <!-- @include ../test/javascript/e2e/mocks/mocks.json -->;
    var mockPut = <!-- @include ../test/javascript/e2e/mocks/mocks-put.json -->;

    angular.module('dbWebAppE2E', ['dbWebApp', 'ngMockE2E'])
            .run(function ($httpBackend, $log) {

// prepare the mocks
                Object.keys(mockGet).forEach(function (key) {
                          $httpBackend.whenGET(key).respond(function (method, req) {
                              $log.info('Mock response for request', method, req);
                              return [mockGet[key].status || 200, mockGet[key].data, {'Content-type': 'application/json'}];
                          });
                      });
                Object.keys(mockPut).forEach(function (key) {
                          $httpBackend.whenPUT(key).respond(function (method, req) {
                              $log.info('Mock response for request', method, req);
                              return [mockPut[key].status || 200, mockPut[key].data, {'Content-type': 'application/json'}];
                          });
                      });

                $httpBackend.whenGET(/^api\//).respond(function (method, req) {
                    $log.error('Error caused by missing mock', method, req);
                    return [404, 'Missing mock'];
                });

                $httpBackend.whenPUT(/^api\//).respond(function (method, req) {
                    $log.error('Error caused by missing mock', method, req);
                    return [404, 'Missing mock'];
                });

                $httpBackend.whenGET(/.*/).passThrough();
                $httpBackend.whenPUT(/.*/).passThrough();
            });
</script>
