<button type="button" class="grey-button pull-right" ng-click="resourceDetails.backToMyResources()">&lt; Back to my resources</button>
<hierarchy-selector name="resourceDetails.resource.resource"></hierarchy-selector>
<h1><name-formatter ng-if="resourceDetails.resource.resource" name="resourceDetails.resource.resource" type="resourceDetails.resource.type"></name-formatter></h1>
<div class="flags-container" style="margin-bottom: 2em">
    <!-- TODO tooltip doesn't work here -->
    <flag class="grey" tooltip="Status" ng-repeat="f in resourceDetails.flags" text="f"></flag>
</div>
<usage-status></usage-status>

<h2>Object in RIPE Database</h2>
<whois-object-viewer ng-model="resourceDetails.details" ng-if="resourceDetails.details" update-clicked="resourceDetails.showObjectEditor()"></whois-object-viewer>

<section ng-if="resourceDetails.canHaveMoreSpecifics">
    <h2>More specifics</h2>
    <div class="prefix-filter"
         ng-if="::resourceDetails.moreSpecifics.resources.length">
        <div class="input-group">
            <input type="text"
                   name="ipFilter"
                   class="form-control"
                   placeholder="Search for prefix"
                   ng-model="resourceDetails.ipFilter"
                   ng-change="resourceDetails.applyFilter()">
            <span class="input-group-btn">
                <button type="button"
                        class="btn btn-default"
                        ng-disabled="!resourceDetails.ipFilter"
                        ng-click="resourceDetails.ipFilter = ''; resourceDetails.applyFilter();">
                    <span class="fa fa-times"></span></button>
            </span>
        </div>
        <span ng-if="resourceDetails.ipFilter" style="float: right">
            Showing {{resourceDetails.moreSpecifics.filteredSize }} out of {{resourceDetails.moreSpecifics.totalNumberOfResources}}
        </span>
    </div>
    <table class="table table-bordered table-body-borderless resources table-striped" ng-if="resourceDetails.moreSpecifics.resources.length">
        <thead>
        <tr>
            <th>Internet number resource</th>
            <th>Status</th>
            <th>Netname</th>
            <th>Used</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="resource in resourceDetails.moreSpecifics.resources" ng-if="$index < resourceDetails.nrMoreSpecificsToShow">
            <td><a ng-click="resourceDetails.showDetail(resource)">
                <name-formatter name="resource.resource" type="resource.type"></name-formatter>
            </a></td>
            <td>{{ resource.status }}</td>
            <td>{{ resource.netname }}</td>
            <td>{{ (resource.usage.used / resource.usage.total)*100 | number:1}}%</td>
        </tr>
        </tbody>
    </table>
    <p scroller="resourceDetails.almostOnScreen()" ng-show="resourceDetails.showScroller"></p>
    <div class="alert alert-warning" ng-if="resourceDetails.moreSpecifics.resources.length === 0">
        No more specific objects exist.
    </div>
</section>
