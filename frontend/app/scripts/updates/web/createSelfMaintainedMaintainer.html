<alerts></alerts>
<form id="createForm">
    <h1>Create "mntner" object</h1>
    <section class="form-fields maintainer-fields">
        <strong>Please select your administrative contact before creating the shared maintainer object</strong>
        <article class="maintainer-icons">
            <span class="fa fa-search maintainer-search-icon"></span>
            <a ng-click="$ctrl.isAdminCHelpShown = !$ctrl.isAdminCHelpShown" class="btn btn-default ga-help-attr maintainer-help" id="admincHelp">
                <span class="fa fa-question"></span>
            </a>
        </article>
        <ui-select multiple="true"
                   theme="bootstrap"
                   ng-model="$ctrl.adminC.object"
                   close-on-select="true"
                   on-select="$ctrl.onAdminCAdded($item, $model)"
                   on-remove="$ctrl.onAdminCRemoved($item, $model)"
                   ng-if="$ctrl.uiSelectTemplateReady">
            <ui-select-match>{{$item.key}}</ui-select-match>
            <ui-select-choices repeat="adminC in $ctrl.adminC.alternatives track by adminC.key"
                               refresh="$ctrl.adminCAutocomplete($select.search)"
                               refresh-delay="100">
                <div class="option">
                    <span class="title">{{adminC.key}} - <b>{{adminC.person}} {{adminC.role}}</b></span>
                </div>
            </ui-select-choices>
        </ui-select>
        <div uib-collapse="!$ctrl.isAdminCHelpShown" class="text field-description">
            <strong>Description</strong><br>
            {{$ctrl.admincDescription}}<br>
            <strong>Syntax</strong><br>
            <span ng-bind-html="$ctrl.admincSyntax"></span>
            </div>
        <div ng-show="!$ctrl.hasAdminC()">
            <strong>Don't have an administrative contact? <a href="#/webupdates/create/person/self">Create maintainer and person pair</a></strong>
        </div>
    </section>

    <section class="visible-field-form" ng-show="$ctrl.hasAdminC()">

        <ul class="form-fields appeared-fields">

            <li ng-repeat="attribute in ($ctrl.maintainerAttributes | filter: {name: '!mnt-by'} | filter: {name: '!source'} | filter: {name: '!upd-to'} | filter: {name:'!auth'} | filter: {name:'!admin-c'})" class="form-group input-group">
                <label>{{attribute.name}}</label>

                <span ng-if="attribute.$$error" class="text-error">
                    <span ng-bind-html="attribute.$$error"></span>
                </span>

                <input type="text"
                       name="{{attribute.name}}"
                       ng-model="attribute.value"
                       placeholder="{{attribute.$$meta.$$short}}"
                       ng-blur="$ctrl.fieldVisited(attribute)"
                       ng-required="{{attribute.$$meta.$$mandatory}}"
                       class="form-control"
                       autocomplete="off"/>
                <div class="text field-description" uib-collapse="!$ctrl.isHelpShown" ng-if="$ctrl.isHelpShown">
                    <strong>Description</strong><br>
                    <span ng-bind-html="$ctrl.getAttributeDescription('mntner')"></span><br>
                    <strong>Syntax</strong><br>
                    <span ng-bind-html="$ctrl.getAttributeSyntax('mntner')"></span>
                </div>
                <ul class="input-group-btn">
                    <li>
                        <a id="help" class="btn btn-default ga-help-attr" ng-click="$ctrl.isHelpShown = !$ctrl.isHelpShown">
                            <span class="fa fa-question" ></span>
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
        <section class="supporting-text">
            <p>By submitting this form you explicitly express your agreement with the <a
                href="https://www.ripe.net/db/support/db-terms-conditions.html" target="_blank">RIPE Database Terms and Conditions</a></p>
        </section>
        <input type="submit" ng-click="$ctrl.submit()" ng-disabled="!$ctrl.isFormValid() || $ctrl.submitInProgress" class="blue-button pull-right ga-createobj-create" value="Submit" />
        <button ng-click="$ctrl.cancel()" class="blue-button pull-right ga-createobj-create" style="border:0;">Cancel</button>
    </section>
</form>
